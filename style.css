:root{
  --bg:#0b0b0c; --card:#141417; --text:#eaeef3; --muted:#a6adbb;
  --tile:#20232a; --tile2:#262b34; --accent:#8ab4f8; --ok:#3778ff;
  --wrong:#b00020; --wrongDark:#7a0015; --shadow:#0008; --good:#10b981;
  --outline:#3a3f49;
}
@media(prefers-color-scheme:light){
  :root{ --bg:#f5f7fb; --card:#fff; --text:#111; --muted:#445;
         --tile:#eef1f6; --tile2:#e6ebf4; --accent:#2358ff; --ok:#2d6bff; --shadow:#0001; --outline:#cbd5e1;}
}
*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html,body{ height:100%; }
body{ margin:0; background:var(--bg); color:var(--text); font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif; }

button{ touch-action:manipulation; }

/* 상단바 */
.topbar{ position:sticky; top:0; z-index:10; background:var(--card); padding:12px 16px; border-bottom:1px solid #3335; }
.title{ font-weight:800; font-size:22px; margin-bottom:6px; }
.stats{ font-size:13px; color:var(--muted); display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap:wrap; }
.badge{ padding:3px 10px; border-radius:999px; font-size:12px; }
.badge.pass{ background:var(--good); color:#fff; }
.badge.fail{ background:var(--wrong); color:#fff; }
.badge.mute{ background:#444; color:#ddd; }
.progress{ width:100%; height:8px; background:#3336; border-radius:6px; overflow:hidden; }
#progressBar{ height:100%; width:0%; background:linear-gradient(90deg,var(--ok),#42d392); }

/* 홈 */
.home-view{ padding:16px 14px 96px; }
.home-card{ max-width:980px; margin:0 auto; background:var(--card); border:1px solid #3335; border-radius:18px; padding:16px; box-shadow:0 10px 28px var(--shadow); }
.home-card h1{ margin:6px 0 12px; }
.home-grid{ display:grid; gap:14px; grid-template-columns:1fr; }
.form label{ display:block; font-size:13px; color:var(--muted); margin-bottom:6px; }
.form input{ width:100%; padding:12px 12px; border-radius:12px; border:1px solid var(--outline); background:var(--tile2); color:var(--text); }
.form .row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:8px; }
.cta{ width:100%; height:54px; border-radius:14px; border:0; background:var(--ok); color:#fff; font-weight:800; font-size:16px; margin-top:12px; }
.ghost{ background:transparent; border:1px solid #4447; color:var(--text); padding:12px 12px; border-radius:10px; }
.ghost.wide{ width:100%; height:48px; margin-top:8px; }
.panel{ background:var(--tile); border:1px solid #3336; border-radius:12px; padding:12px; }
.panel-title{ font-weight:700; margin-bottom:8px; }
.muted{ color:var(--muted); }
.home-info{ display:grid; gap:12px; }

/* 풀이 */
.card-view{ padding:18px 14px 96px; }
.card{ max-width:720px; margin:0 auto; background:var(--card); border:1px solid #3335; border-radius:18px; padding:16px; box-shadow:0 10px 28px var(--shadow); }
.qhead{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
#qTitle{ font-weight:700; font-size:18px; }
.help{ background:var(--tile); border:1px solid #3336; border-radius:12px; padding:10px 12px; color:var(--muted); margin:8px 0 4px; }
.help ol{ margin:0 0 0 18px; padding:0; }
.choices{ display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin:14px 0 10px; }
.choice{ height:78px; border-radius:16px; border:2px solid var(--outline); background:var(--tile2); color:var(--text); font-weight:800; font-size:24px; }
.choice.selected{ outline:3px solid var(--ok); background:#10223a; }

/* 오답 토글 */
.wrong-btn{ width:100%; height:60px; border-radius:14px; border:1px solid var(--wrongDark); background:var(--wrong); color:#fff; font-weight:800; font-size:18px; }

/* 검토/리포트 공통 */
.review-view{ padding:12px 12px 140px; }
.review-head{ max-width:1100px; margin:0 auto 12px; display:flex; align-items:end; justify-content:space-between; gap:10px; flex-wrap:wrap; }
.subtitle{ font-weight:700; }
.note{ color:var(--muted); font-size:13px; margin-top:4px; }

/* 20문항 블록 컨테이너 */
.blocks{ max-width:1100px; margin:0 auto; display:flex; flex-direction:column; gap:20px; }
.block{ border:1px dashed #3b4251; border-radius:14px; padding:12px; }
.block-title{ font-size:13px; color:var(--muted); margin:2px 0 10px 4px; }
.grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(94px,1fr)); gap:10px; }

/* 타일 */
.tile{ height:92px; border-radius:16px; border:2px solid var(--outline); background:var(--tile2); color:var(--text);
  display:flex; flex-direction:column; align-items:center; justify-content:center; user-select:none; gap:3px; }
.tile .num{ font-weight:800; font-size:18px; opacity:.9; }
.tile .sel{ font-weight:900; font-size:26px; }
.tile .ans{ font-size:12px; color:var(--muted); }
.tile.answered{ outline:2px solid var(--ok); }
.tile.wrong{ background:var(--wrong); color:#fff; border-color:var(--wrongDark); }
.tile.wrong .ans{ color:#fff; }

/* 하단 토스트 결과 (문항 가리지 않도록 낮고 얕게) */
.toast{
  position:fixed; left:50%; transform:translateX(-50%); bottom:96px;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  background:var(--card); border:1px solid #3335; border-radius:14px;
  padding:10px 12px; width:min(680px, calc(100% - 20px)); box-shadow:0 8px 20px var(--shadow);
}
.toast-main{ display:flex; align-items:baseline; gap:10px; }
.toast-score{ font-size:28px; font-weight:900; }
.toast-sub{ font-size:12px; color:var(--muted); display:flex; gap:8px; align-items:center; }
.toast .dot{ opacity:.5; }
.toast-actions{ display:flex; gap:8px; }
.mini{ padding:8px 10px; border-radius:10px; border:1px solid #4447; background:#1f2430; color:var(--text); }
.mini:hover{ filter:brightness(1.1); }

/* 하단 도크 */
.dock{ position:fixed; left:0; right:0; bottom:0; z-index:30; backdrop-filter:blur(6px); background:linear-gradient(180deg, #0000, #0004), var(--card); border-top:1px solid #3335; padding:10px 12px; }
.dock[hidden]{ display:none !important; }
.dock-row[hidden]{ display:none !important; }
.dock:empty{ display:none; }
.dock-row{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px; max-width:1100px; margin:0 auto; }
.nav.big{ height:58px; font-size:18px; border-radius:14px; border:1px solid #4447; background:#1f2430; color:var(--text); }
.nav.big.primary{ background:var(--ok); border-color:transparent; color:#fff; }
.nav.big.ghost{ background:transparent; }

/* 데스크톱 */
@media (min-width:920px){
  .home-grid{ grid-template-columns:360px 1fr; }
  .choices{ grid-template-columns:repeat(4,160px); justify-content:center; }
}
